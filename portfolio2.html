<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kerala Office Locations</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;700&family=Manrope:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Manrope', sans-serif;
            background: linear-gradient(135deg, #1a0a0a 0%, #2d1515 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Map Container */
        .map-wrapper {
            background: rgba(45, 21, 21, 0.4);
            border: 1px solid rgba(255, 50, 50, 0.15);
            border-radius: 18px;
            padding: 20px;
            backdrop-filter: blur(15px);
            box-shadow: 0 25px 60px rgba(0, 0, 0, 0.5),
                        inset 0 0 60px rgba(255, 50, 50, 0.02);
            position: relative;
            overflow: hidden;
            animation: fadeInUp 1s ease-out;
        }

        #map {
            width: 100%;
            height: 600px;
            border-radius: 14px;
            z-index: 2;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 50, 50, 0.1);
        }

        /* Custom Markers */
        .custom-marker {
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: bold;
            border: 3px solid #ff3232;
            box-shadow: 0 0 20px rgba(255, 50, 50, 0.5);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            background: #2d1515;
        }

        .custom-marker:hover {
            transform: scale(1.2);
            box-shadow: 0 0 40px rgba(255, 50, 50, 0.8);
        }

        /* HQ Marker */
        .custom-marker.hq {
            width: 60px;
            height: 60px;
            font-size: 28px;
            border-color: #dc2626;
            animation: pulseMain 2s ease-in-out infinite;
        }

        @keyframes pulseMain {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 20px rgba(220, 38, 38, 0.4);
            }
            50% {
                transform: scale(1.12);
                box-shadow: 0 0 40px rgba(220, 38, 38, 0.8);
            }
        }

        /* Sub Branch Marker */
        .custom-marker.sub {
            width: 40px;
            height: 40px;
            font-size: 18px;
            border-color: #ff3232;
        }

        .custom-marker.sub:hover {
            border-color: #dc2626;
        }

        /* Popup Styling */
        .popup-content {
            font-family: 'Manrope', sans-serif;
        }

        .popup-title {
            font-weight: 700;
            font-size: 14px;
            color: #ff3232;
            margin-bottom: 6px;
            font-family: 'Outfit', sans-serif;
        }

        .popup-detail {
            font-size: 12px;
            color: #aa8888;
            margin: 4px 0;
        }

        /* Leaflet Controls */
        .leaflet-control-attribution {
            background: rgba(26, 10, 10, 0.8) !important;
            color: #b8bcc9 !important;
            border-radius: 8px;
            font-size: 9px;
            border: 1px solid rgba(255, 50, 50, 0.15) !important;
            backdrop-filter: blur(10px);
        }

        .leaflet-control-attribution a {
            color: #ff3232 !important;
        }

        .leaflet-control-zoom {
            border-radius: 10px;
            background: rgba(26, 10, 10, 0.8) !important;
            border: 1px solid rgba(255, 50, 50, 0.15) !important;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .leaflet-control-zoom a {
            background: rgba(255, 50, 50, 0.1) !important;
            color: #ff3232 !important;
            border: none !important;
            border-bottom: 1px solid rgba(255, 50, 50, 0.1) !important;
            transition: all 0.3s ease !important;
            font-weight: 700;
            font-size: 14px;
        }

        .leaflet-control-zoom a:hover {
            background: rgba(255, 50, 50, 0.2) !important;
            color: #dc2626 !important;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 25px 15px;
            }

            #map {
                height: 500px;
            }

            .map-wrapper {
                padding: 15px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px 12px;
            }

            #map {
                height: 400px;
            }

            .map-wrapper {
                padding: 12px;
            }

            .custom-marker.hq {
                width: 50px;
                height: 50px;
                font-size: 24px;
            }

            .custom-marker.sub {
                width: 36px;
                height: 36px;
                font-size: 16px;
            }
        }
    </style>
    <div class="container">
        <div class="col-lg-8">
            <!-- map-wrapper -->
            <div class="map-wrapper">
                <div id="map"></div>
            </div>
            <!-- map-wrapper end -->
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
    <script>
        // Office data with flags for each location
        const offices = [
            {
                name: 'Malappuram',
                type: 'Main Branch (Headquarters)',
                lat: 10.8302,
                lng: 76.5044,
                coordinates: '10.8302Â°N, 76.5044Â°E',
                icon: 'ðŸ¢'
            },
            {
                name: 'Palakkad',
                type: 'Sub-Branch',
                lat: 10.7867,
                lng: 76.6548,
                coordinates: '10.7867Â°N, 76.6548Â°E',
                icon: 'ðŸ›ï¸'
            },
            {
                name: 'Kottayam',
                type: 'Sub-Branch',
                lat: 9.5941,
                lng: 76.5214,
                coordinates: '9.5941Â°N, 76.5214Â°E',
                icon: 'ðŸ›ï¸'
            },
            {
                name: 'Thrissur',
                type: 'Sub-Branch',
                lat: 10.5276,
                lng: 76.2144,
                coordinates: '10.5276Â°N, 76.2144Â°E',
                icon: 'ðŸ›ï¸'
            },
            {
                name: 'Alappuzha',
                type: 'Sub-Branch',
                lat: 9.4981,
                lng: 76.3388,
                coordinates: '9.4981Â°N, 76.3388Â°E',
                icon: 'ðŸ›ï¸'
            },
            {
                name: 'Kannur',
                type: 'Sub-Branch',
                lat: 12.1445,
                lng: 75.3713,
                coordinates: '12.1445Â°N, 75.3713Â°E',
                icon: 'ðŸ›ï¸'
            }
        ];

        // Initialize map centered on Kerala
        const map = L.map('map').setView([10.8505, 76.2711], 8);

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© OpenStreetMap contributors',
            maxZoom: 19
        }).addTo(map);

        // Create markers
        const markers = {};
        const markerLayers = L.featureGroup().addTo(map);

        offices.forEach((office) => {
            const isHQ = office.type === 'Main Branch (Headquarters)';
            const customIcon = L.divIcon({
                html: `<div class="custom-marker ${isHQ ? 'hq' : 'sub'}">${office.icon}</div>`,
                className: '',
                iconSize: [isHQ ? 60 : 40, isHQ ? 60 : 40],
                iconAnchor: [isHQ ? 30 : 20, isHQ ? 60 : 40]
            });

            const popupContent = `
                <div class="popup-content">
                    <div class="popup-title">${office.name}</div>
                    <div class="popup-detail"><strong>Type:</strong> ${office.type}</div>
                    <div class="popup-detail"><strong>Coordinates:</strong> ${office.coordinates}</div>
                </div>
            `;

            const marker = L.marker([office.lat, office.lng], {
                icon: customIcon,
                title: office.name
            })
            .bindPopup(popupContent, { maxWidth: 300 })
            .addTo(map);

            markers[office.name] = marker;
            markerLayers.addLayer(marker);
        });

        // Draw connection lines
        const keralaOffice = offices[0];
        const subOffices = offices.slice(1);
        const connectionLayers = L.featureGroup().addTo(map);

        subOffices.forEach((office) => {
            // Main line
            const polyline = L.polyline(
                [
                    [keralaOffice.lat, keralaOffice.lng],
                    [office.lat, office.lng]
                ],
                {
                    color: '#ff3232',
                    weight: 2.5,
                    opacity: 0.7,
                    dashArray: '6, 4',
                    lineCap: 'round',
                    lineJoin: 'round'
                }
            ).addTo(map);

            // Glow effect
            const glowLine = L.polyline(
                [
                    [keralaOffice.lat, keralaOffice.lng],
                    [office.lat, office.lng]
                ],
                {
                    color: '#ff3232',
                    weight: 8,
                    opacity: 0.12,
                    lineCap: 'round',
                    lineJoin: 'round'
                }
            ).addTo(map);

            connectionLayers.addLayer(polyline);
            connectionLayers.addLayer(glowLine);
        });

        // Fit all markers in view
        map.fitBounds(markerLayers.getBounds().pad(0.1));

        // Handle window resize
        window.addEventListener('resize', () => {
            map.invalidateSize();
        });
    </script>
</body>
</html>